<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <style>
        .ui-fieldset .ui-fieldset-legend
        {
            font-size: small;
        }

    </style>
    <h:form id="RegistroGarantiaRealCreateForm">

        <h:panelGroup id="display">
            <p:panel header="Datos de Solicitud">
                <p:panelGrid columns="4">
                    <p:outputLabel value="Codigo Solicitud" for="codigosolicitud" />
                    <p:outputLabel id="codigosolicitud" value="#{garantiaRealManagedBean.codigoSolicitud}"/>

                    <p:outputLabel value="Codigo Asociado" for="codigoasociado" />
                    <p:outputLabel id="codigoasociado" value="#{garantiaRealManagedBean.codigoSocio}"/>


                    <p:outputLabel value="Nombre" for="nombreasociado" />
                    <p:outputLabel id="nombreasociado" value="#{garantiaRealManagedBean.nombreAsociado}"/>
                </p:panelGrid>
            </p:panel>

            
            
            <p:panel header="Garantias Reales">
                <br></br>        <br></br>
                <p:dataTable id="datalist" var="item" value="#{garantiaRealManagedBean.garantiasReales}" paginator="true" rows="5"  
                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport}"  
                             rowsPerPageTemplate="5,10,15"  lazy="true" resizableColumns="true"  
                             selectionMode="single" selection="#{garantiaRealManagedBean.selected}"
                             rowKey="#{item.rgrId}" paginatorPosition="bottom">

                    <p:ajax event="rowSelect"   update="createButton"  listener="#{garantiaRealManagedBean.resetParents}"/>
                    <p:ajax event="rowUnselect" update="createButton"  listener="#{garantiaRealManagedBean.resetParents}"/>

                    <p:column width="20%">
                        <f:facet name="header">
                            <h:outputText value="Tipo"/>
                        </f:facet>
                        <h:outputText value="#{item.rgrTipo}"/>
                    </p:column>

                    <p:column width="20%">
                        <f:facet name="header">
                            <h:outputText value="Numero de Cuenta"/>
                        </f:facet>
                        <h:outputText value="#{item.rgrNumerocuenta}"/>
                    </p:column>


                    <p:column width="20%" style="text-align: center">
                        <f:facet name="header">
                            <h:outputText value="Numero de Deposito"/>
                        </f:facet>
                        <h:outputText value="#{item.rgrNumerodeposito}"/>
                    </p:column>


                    <p:column width="20%" style="text-align: center">
                        <f:facet name="header">
                            <h:outputText value="Porcentaje Pignorado"/>
                        </f:facet>
                        <h:outputText value="#{item.rgrPorcentajepignorado}">
                            <f:convertNumber type="percent" minFractionDigits="2" maxFractionDigits="2" ></f:convertNumber>
                        </h:outputText>
                    </p:column>

                    <p:column width="20%" style="text-align: center">
                        <f:facet name="header">
                            <h:outputText value="Monto Pignorado"/>
                        </f:facet>
                        <h:outputText value="#{item.rgrMontopignorado}"/>
                    </p:column>


                    <f:facet name="footer">
                        <div class="footer-section">
                            <p:commandButton id="createButton" icon="ui-icon-plus"   value="#{crudbundle.Create}" 
                                             actionListener="#{garantiaRealManagedBean.agregarGarantiaRealDialog(event)}" 
                                             update="@(#GarantiaRealCreateForm)" 
                                             oncomplete="GarantiaRealCreateDialog.show()"/>
                               <p:commandButton id="deleteButton" icon="ui-icon-close"   value="Quitar" 
                                                actionListener="#{garantiaRealManagedBean.quitarGarantiaReal(event)}" update=":RegistroGarantiaRealCreateForm" />
                               <p:commandButton value="Cancelar" actionListener="#{garantiaRealManagedBean.cancelar(event)}" />
                               
                        </div>
                    </f:facet>

                </p:dataTable>
                        <br></br>
            </p:panel>



        </h:panelGroup>

    </h:form>

</ui:composition>


