<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">
    <style>
        .ui-fieldset .ui-fieldset-legend
        {
            font-size: small;
        }

    </style>
    <h:form id="RegistrogarantiahipotecariaCreateForm">
        <p:growl id="growl" showDetail="true" sticky="false" />
        <h:panelGroup id="display">
            <p:panel header="Datos de Solicitud">
                <p:panelGrid columns="4">
                    <p:outputLabel value="Codigo Solicitud" for="codigosolicitud" />
                    <p:outputLabel id="codigosolicitud" value="#{garantiaHipotecariaManagedBean.codigoSolicitud}"/>

                    <p:outputLabel value="Codigo Asociado" for="codigoasociado" />
                    <p:outputLabel id="codigoasociado" value="#{garantiaHipotecariaManagedBean.codigoSocio}"/>

                    <p:outputLabel value="Nombre" for="nombreasociado" />
                    <p:outputLabel id="nombreasociado" value="#{garantiaHipotecariaManagedBean.nombreAsociado}"/>
                </p:panelGrid>
            </p:panel>
            <p:panel header="Registro Garantias">
                <p:panelGrid columns="1">

                    <p:panelGrid columns="5" >

                        <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghTipoinmueble}"  />

                        <p:selectOneMenu value="#{garantiaHipotecariaManagedBean.tiposInmueble.tipoInmuebleId}" effect="fade" id="tipoinmueble">
                            <f:selectItem itemLabel="Seleccione" />
                            <f:selectItems value="#{garantiaHipotecariaManagedBean.tiposInmuebles}" var="tipoinmueble" itemLabel="#{tipoinmueble.tipoInmuebleNombre}" itemValue="#{tipoinmueble.tipoInmuebleId}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghMatricula}" for="rghMatricula" />
                        <p:inputText id="rghMatricula" value="#{garantiaHipotecariaManagedBean.selected.rghMatricula}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghMatricula}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghMatricula}"/>

                        <p:commandButton value="Ingresar Est. Registral" icon="ui-icon-extlink" actionListener="#{garantiaHipotecariaManagedBean.dialogAsignarEstadoRegistral(event)}" process="rghMatricula" update="@(#EstadoregistralCreateForm)" oncomplete="EstadoregistralCreateDialog.show()"/>  

                    </p:panelGrid>
                    <p:columnGroup>
                        <p:outputLabel value="Municipio" for="municipio" />
                        <p:selectOneMenu id="municipio" value="#{garantiaHipotecariaManagedBean.municipio}" converter="#{municipioConverter}"  panelStyle="width:180px"
                                         effect="fade" var="t" style="width:200px" filter="true" filterMatchMode="contains">
                            <f:selectItems value="#{garantiaHipotecariaManagedBean.municipios}" var="municipio" itemLabel="#{municipio.nombreMunicipio}" itemValue="#{municipio}" />

                            <p:column>
                                <h:outputText value="#{t.nombreMunicipio}" />
                            </p:column>
                        </p:selectOneMenu>
                    </p:columnGroup>
                    <p:columnGroup>
                        <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghDireccion}" for="rghDireccion" />
                        <p:inputText id="rghDireccion" value="#{garantiaHipotecariaManagedBean.selected.rghDireccion}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghDireccion}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghDireccion}" size="60"/>
                    </p:columnGroup>

                    <p:panel header="Propietarios">
                        <p:dataTable id="datalist" var="item" value="#{garantiaHipotecariaManagedBean.propietarios}" paginator="true" rows="5"  
                                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport}"  
                                     rowsPerPageTemplate="5,10,15"  lazy="true" resizableColumns="true"  
                                     selectionMode="single" selection="#{garantiaHipotecariaManagedBean.propietario}"
                                     rowKey="#{item.propietarioinmueblePK.rghId}" paginatorPosition="bottom">

                            <p:ajax event="rowSelect"   update="createButton"  listener="#{garantiaHipotecariaManagedBean.resetParents}"/>
                            <p:ajax event="rowUnselect" update="createButton"  listener="#{garantiaHipotecariaManagedBean.resetParents}"/>

                            <p:column width="10%">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_propietarioinmueblePK_correlativo}"/>
                                </f:facet>
                                <h:outputText value="#{item.propietarioinmueblePK.correlativo}"/>
                            </p:column>

                            <p:column width="35%">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_piNombrepropietario}"/>
                                </f:facet>
                                <h:outputText value="#{item.piNombrepropietario}"/>
                            </p:column>


                            <p:column width="15%" style="text-align: center">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_piDuipropietario}"/>
                                </f:facet>
                                <h:outputText value="#{item.piDuipropietario}"/>
                            </p:column>


                            <p:column width="20%" style="text-align: center">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_piNitpropietario}"/>
                                </f:facet>
                                <h:outputText value="#{item.piNitpropietario}"/>
                            </p:column>


                            <p:column width="15%" style="text-align: center">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_piPorcentajepropiedad}">
                                    </h:outputText>
                                </f:facet>
                                <h:outputText value="#{item.piPorcentajepropiedad}">
                                </h:outputText>
                            </p:column>


                            <p:column width="15%" style="text-align: center">
                                <f:facet name="header">
                                    <h:outputText value="#{crudbundle.ListPropietarioinmuebleTitle_piTipotenencia}"/>
                                </f:facet>
                                <h:outputText value="#{item.piTipotenencia}"/>
                            </p:column>

                            <f:facet name="footer">
                                <div class="footer-section">
                                    <p:commandButton id="createButton" icon="ui-icon-plus"   value="#{crudbundle.Create}" actionListener="#{garantiaHipotecariaManagedBean.agregarPropietarioUnicoDialog(event)}" update="@(#PropietarioinmuebleCreateForm)" oncomplete="PropietarioinmuebleCreateDialog.show()"/>
                                </div>
                            </f:facet>

                        </p:dataTable>
                    </p:panel>

                    <p:panel header="Datos del Valuo">
                        <p:panelGrid columns="2">
                            <p:panelGrid columns="2" >
                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghPeritovaluador}" for="rghPeritovaluador" />
                                <p:inputText id="rghPeritovaluador" value="#{garantiaHipotecariaManagedBean.selected.rghPeritovaluador}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghPeritovaluador}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghPeritovaluador}" size="60"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghFechavaluo}" for="rghFechavaluo" />
                                <p:calendar id="rghFechavaluo" pattern="MM/dd/yyyy" value="#{garantiaHipotecariaManagedBean.selected.rghFechavaluo}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghFechavaluo}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghFechavaluo}" showOn="button"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghCalificacion}" for="rghCalificacion" />
                                <p:inputText id="rghCalificacion" value="#{garantiaHipotecariaManagedBean.selected.rghCalificacion}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghCalificacion}"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghFechaconstruccion}" for="rghFechaconstruccion" />
                                <p:calendar id="rghFechaconstruccion" pattern="MM/dd/yyyy" value="#{garantiaHipotecariaManagedBean.selected.rghFechaconstruccion}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghFechaconstruccion}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghFechaconstruccion}" showOn="button"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghArearegistral}" for="rghArearegistral" />
                                <p:inputText id="rghArearegistral" value="#{garantiaHipotecariaManagedBean.selected.rghArearegistral}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghArearegistral}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghArearegistral}"/>
                            </p:panelGrid> 
                            <p:panelGrid columns="2" >
                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghValorcampo}" for="rghValorcampo" />
                                <p:inputText id="rghValorcampo" value="#{garantiaHipotecariaManagedBean.selected.rghValorcampo}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghValorcampo}"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghValortierra}" for="rghValortierra" />
                                <p:inputText id="rghValortierra" value="#{garantiaHipotecariaManagedBean.selected.rghValortierra}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghValortierra}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghValortierra}"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghValorconstruccion}" for="rghValorconstruccion" />
                                <p:inputText id="rghValorconstruccion" value="#{garantiaHipotecariaManagedBean.selected.rghValorconstruccion}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghValorconstruccion}"/>

                                <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghValorvaluo}" for="rghValorvaluo" />
                                <p:inputText id="rghValorvaluo" value="#{garantiaHipotecariaManagedBean.selected.rghValorvaluo}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghValorvaluo}" required="true" requiredMessage="#{crudbundle.CreateRegistrogarantiahipotecariaRequiredMessage_rghValorvaluo}"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:panel>

                    <p:panelGrid columns="2">
                        <p:panel header="Gravamenes del Inmueble">
                            <p:panelGrid columns="2">
                                <p:panelGrid columns="2" >
                                    <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghNombreinstitucion}" for="rghNombreinstitucion" />
                                    <p:inputText id="rghNombreinstitucion" value="#{garantiaHipotecariaManagedBean.selected.rghNombreinstitucion}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghNombreinstitucion}" size="50"/>

                                    <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghValorhipoteca}" for="rghValorhipoteca" />
                                    <p:inputText id="rghValorhipoteca" value="#{garantiaHipotecariaManagedBean.selected.rghValorhipoteca}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghValorhipoteca}"/>

                                    <p:outputLabel value="#{crudbundle.CreateRegistrogarantiahipotecariaLabel_rghSaldoactual}" for="rghSaldoactual" />
                                    <p:inputText id="rghSaldoactual" value="#{garantiaHipotecariaManagedBean.selected.rghSaldoactual}" title="#{crudbundle.CreateRegistrogarantiahipotecariaTitle_rghSaldoactual}"/>

                                </p:panelGrid>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Relacion monto del prestamo sobre valor de la propiedad">
                            <p:panelGrid columns="2">
                                <p:panelGrid columns="2" >
                                    <p:outputLabel value="Valor de la propiedad" for="valorpropiedadrelacion" />
                                    <p:inputText id="valorpropiedadrelacion" value="#{garantiaHipotecariaManagedBean.selected.rghNombreinstitucion}" title="Valor de la Propiedad"/>

                                    <p:outputLabel value="Monto del Credito" for="montocreditorelacion" />
                                    <p:inputText id="montocreditorelacion" value="#{garantiaHipotecariaManagedBean.selected.rghValorhipoteca}" title="Monto del Credito"/>

                                    <p:outputLabel value="Relacion Porcentual" for="relacionporcentual" />
                                    <p:inputText id="relacionporcentual" value="#{garantiaHipotecariaManagedBean.selected.rghSaldoactual}" title="Relacion Porcentual"/>

                                </p:panelGrid>
                            </p:panelGrid>
                        </p:panel>
                    </p:panelGrid>
                </p:panelGrid>

                <div style="text-align: center">
                    <br></br>
                    <p:commandButton value="Guardar" actionListener="#{garantiaHipotecariaManagedBean.saveNew(event)}" ajax="false"/>
                    <p:commandButton value="Cancelar" actionListener="#{garantiaHipotecariaManagedBean.cancelar(event)}" ajax="false"/>
                </div>


            </p:panel>
        </h:panelGroup>

    </h:form>


</ui:composition>


