<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="AgendaCloseDlg" widgetVar="AgendaCloseDialog" modal="true" resizable="false" appendTo="@(body)" header="Cerrar Reunion" closeOnEscape="true">

            <h:form id="AgendaCloseForm">

                <h:panelGroup id="display">
                    <p:panelGrid  columns="2" rendered="#{agendaComiteCreditosManagedBean.selected != null}">

                        <p:outputLabel value="Fecha de reunion" for="fechaReunion" />
                        <h:panelGroup>
                            <h:outputText id="fechaReunion" value="#{agendaComiteCreditosManagedBean.selected.accFechareunion}" title="Fecha de reunion" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </h:panelGroup>

                        <p:outputLabel value="Hora Programada" for="horaReunion" />
                        <h:panelGroup>
                            <h:outputText id="horaReunion" value="#{agendaComiteCreditosManagedBean.selected.accHorareunion}" title="Hora programada" />
                        </h:panelGroup>

                        <p:outputLabel value="Lugar de reunion" for="lugarReunion" />
                        <h:panelGroup>
                            <h:outputText id="lugarReunion" value="#{agendaComiteCreditosManagedBean.selected.accLugarreunion}" title="Lugar de reunion" />
                        </h:panelGroup>

                        <p:outputLabel value="Realizada: " />
                        <p:selectBooleanCheckbox value="#{agendaComiteCreditosManagedBean.selected.realizada}" />


                    </p:panelGrid>
                    <br/>


                    <p:dataTable id="listadoMiembrosClose" var="asistente" value="#{agendaComiteCreditosManagedBean.asistentes}" rowKey="#{asistente.asistentePK.mccId}" paginatorPosition="bottom"
                                 paginator="true" rows="5"  
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                 rowsPerPageTemplate="5,10"
                                 emptyMessage="No se encontraron miembros del comite para mostrar">  

                        <f:facet name="header">  
                            Listado de miembros del Comite de Cr&eacute;ditos
                        </f:facet>  

                        <p:column  id="asistenteCargoClose" headerText="Cargo" resizable="false" width="30%">  
                            <h:outputText value="#{asistente.miembroscomitecreditos.mccCargo}" />                     
                        </p:column>  

                        <p:column id="asistenteNombreClose" headerText="Nombre" resizable="false" width="50%"> 
                            <h:outputText value="#{asistente.miembroscomitecreditos.mccNombre}" />  
                        </p:column>  

                        <p:column id="asistenteAsistiraView" headerText="Asistira" resizable="false" width="10%" style="text-align: center"> 
                            <h:outputText value="#{asistente.asistenteAsistira ? 
                                                   'SI' : 
                                                   'NO'}" />  
                        </p:column> 

                        <p:column id="asistentePermisoView" headerText="Tiene Permiso" resizable="false" width="10%" style="text-align: center"> 
                            <h:outputText value="#{asistente.assistentePermiso ? 
                                                   'SI' : 
                                                   'NO'}" />  
                        </p:column>  

                        <p:column id="asistentePermisoClose" headerText="Asistio" resizable="false" width="10%" style="text-align: center"> 
                            <p:selectBooleanCheckbox value="#{asistente.assistenteAsistio}" />  
                        </p:column>                 

                    </p:dataTable>  


                    <br/>


                    <p:dataTable var="analisisenagenda" value="#{agendaComiteCreditosManagedBean.analisisenagendacomitecreditosList}" id="analisisenagendacomitecreditosList" editable="true"  
                                 paginator="true" rows="5"  
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                 rowsPerPageTemplate="5,10,15" 
                                 paginatorPosition="bottom">  

                        <f:facet name="header">  
                            Analisis en agenda
                        </f:facet>  


                        <p:column  id="idSolicitud" headerText="Solicitud" resizable="false" width="12%">  
                            <h:outputText value="#{analisisenagenda.analisis.solicitudId.solicitudId}" />                     
                        </p:column>  

                        <p:column id="fechaSolicitud" headerText="Fecha" resizable="false" width="10%" style="text-align: center">
                            <h:outputText value="#{analisisenagenda.analisis.solicitudId.fechaRegistro}">
                                <f:convertDateTime pattern="dd-MM-yyyy"/>
                            </h:outputText>
                        </p:column>  

                        <p:column id="destinoSolicitud" headerText="Destino" resizable="false" width="15%"> 
                            <h:outputText value="#{analisisenagenda.analisis.solicitudId.solicitudDestino}" />  
                        </p:column> 

                        <p:column id="asociadoSolicitud" headerText="Nombre del Asociado" resizable="false" width="20%"> 
                            <h:outputText value="#{analisisenagenda.analisis.solicitudId.nombreCompleto}" />  
                        </p:column>                 

                        <p:column id="montoSolicitud" headerText="Monto" resizable="false" width="10%" style="text-align: right"> 
                            <h:outputText value="#{analisisenagenda.analisis.analisisMonto}">
                                <f:convertNumber type="currency" currencySymbol="$ " />
                            </h:outputText>  
                        </p:column> 

                        <p:column headerText="Resolucion" width="32%">  
                            <p:cellEditor>  
                                <f:facet name="output">  
                                    <h:outputText value="#{analisisenagenda.tiporesolucionId.tiporesolucionNombre}" />  
                                </f:facet>  
                                <f:facet name="input">  
                                    <h:selectOneMenu value="#{analisisenagenda.tiporesolucionId}" converter="#{tipoResolucionConverter}">  
                                        <f:selectItems value="#{agendaComiteCreditosManagedBean.tiporesolucionList}"
                                                       var="tipo"   
                                                       itemLabel="#{tipo.tiporesolucionNombre}"  
                                                       itemValue="#{tipo}" />  
                                    </h:selectOneMenu>  
                                </f:facet>  
                            </p:cellEditor>  
                        </p:column>  

                        <p:column width="8%">  
                            <p:rowEditor />  
                        </p:column>  

                    </p:dataTable>  


                    <br/>

                    <p:commandButton icon="ui-icon-disk" actionListener="#{agendaComiteCreditosManagedBean.close}" value="#{crudbundle.Update}" update="display,:AgendaListForm,:growl" oncomplete="handleSubmit(xhr,status,args,AgendaCloseDialog);"/>
                    <span>&nbsp;</span>
                    <p:commandButton icon="ui-icon-closethick" value="#{crudbundle.Cancel}" onclick="AgendaCloseDialog.hide()"/>
                </h:panelGroup>

            </h:form>

        </p:dialog>

    </ui:composition>

</html>
