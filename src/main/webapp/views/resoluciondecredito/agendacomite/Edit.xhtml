<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="AgendaEditDlg" widgetVar="AgendaEditDialog" modal="true" resizable="false" appendTo="@(body)" header="Modificar Agenda" closeOnEscape="true">

            <h:form id="AgendaEditForm">

                <h:panelGroup id="display">
                    <p:panelGrid  columns="2" rendered="#{agendaComiteCreditosManagedBean.selected != null}">

                        <p:outputLabel value="Fecha de reunion" for="fechaReunion" />
                        <h:panelGroup>
                            <p:calendar id="fechaReunion" value="#{agendaComiteCreditosManagedBean.selected.accFechareunion}" title="Fecha de reunion" required="true" requiredMessage="La fecha de la reunion es obligatoria" size="10" pattern="dd/MM/yyyy" readonlyInput="true"/>
                            <p:tooltip for="fechaReunion" value="Ingrese la fecha en la cual se realizara la reunion del comite de creditos"/>
                        </h:panelGroup>

                        <p:outputLabel value="Hora Programada" for="horaReunion" />
                        <h:panelGroup>
                            <p:calendar id="horaReunion" value="#{agendaComiteCreditosManagedBean.selected.accHorareunion}" title="Hora programada" required="true" requiredMessage="La hora de la reunion es obligatoria" size="10" pattern="HH:mm" timeOnly="true" readonlyInput="true"/>
                            <p:tooltip for="horaReunion" value="Ingrese la hora a la cual esta programada la reunion del comite de creditos"/>
                        </h:panelGroup>

                        <p:outputLabel value="Lugar de reunion" for="lugarReunion" />
                        <h:panelGroup>
                            <p:inputText id="lugarReunion" value="#{agendaComiteCreditosManagedBean.selected.accLugarreunion}" title="Lugar de reunion" required="true" requiredMessage="El lugar de la reunion es obligatorio" size="100" maxlength="100"/>
                            <p:tooltip for="lugarReunion" value="Ingrese el lugar en el cual esta programada la reunion del comite de creditos"/>
                        </h:panelGroup>

                    </p:panelGrid>
                    <br/>


                    <p:dataTable id="listadoMiembrosEdit" var="asistente" value="#{agendaComiteCreditosManagedBean.asistentes}" rowKey="#{asistente.asistentePK.mccId}" paginatorPosition="bottom"
                                 paginator="true" rows="5"  
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                 rowsPerPageTemplate="5,10"
                                 emptyMessage="No se encontraron miembros del comite para mostrar">  

                        <f:facet name="header">  
                            Listado de miembros del Comite de Cr&eacute;ditos
                        </f:facet>  

                        <p:column  id="asistenteCargoEdit" headerText="Cargo" resizable="false" width="30%">  
                            <h:outputText value="#{asistente.miembroscomitecreditos.mccCargo}" />                     
                        </p:column>  

                        <p:column id="asistenteNombreEdit" headerText="Nombre" resizable="false" width="50%"> 
                            <h:outputText value="#{asistente.miembroscomitecreditos.mccNombre}" />  
                        </p:column>  

                        <p:column id="asistenteAsistiraEdit" headerText="Asistira" resizable="false" width="10%" style="text-align: center"> 
                            <p:selectBooleanCheckbox value="#{asistente.asistenteAsistira}"/>  
                        </p:column> 

                        <p:column id="asistentePermisoEdit" headerText="Tiene Permiso" resizable="false" width="10%" style="text-align: center"> 
                            <p:selectBooleanCheckbox value="#{asistente.assistentePermiso}" />  
                        </p:column>                 
                      
                    </p:dataTable>  


                    <br/>


                    <p:dataTable id="listadoSolicitudesEdit" var="solicitud" value="#{agendaComiteCreditosManagedBean.analisis}" rowKey="#{solicitud.analisisId}" paginatorPosition="bottom"
                                 paginator="true" rows="5"  
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                 rowsPerPageTemplate="5,10"
                                 emptyMessage="No se encontraron solicitudes para mostrar">  

                        <f:facet name="header">  
                            Listado de Solicitudes
                        </f:facet>  

                        <p:column  id="idSolicitudEdit" headerText="Solicitud" resizable="false" width="12%">  
                            <h:outputText value="#{solicitud.solicitudId.solicitudId}" />                     
                        </p:column>  

                        <p:column id="fechaSolicitudEdit" headerText="Fecha" resizable="false" width="10%" style="text-align: center">
                            <h:outputText value="#{solicitud.solicitudId.fechaRegistro}">
                                <f:convertDateTime pattern="dd-MM-yyyy"/>
                            </h:outputText>
                        </p:column>  

                        <p:column id="destinoSolicitudEdit" headerText="Destino" resizable="false" width="15%"> 
                            <h:outputText value="#{solicitud.solicitudId.solicitudDestino}" />  
                        </p:column> 

                        <p:column id="asociadoSolicitudEdit" headerText="Nombre del Asociado" resizable="false" width="20%"> 
                            <h:outputText value="#{solicitud.solicitudId.nombreCompleto}" />  
                        </p:column>                 

                        <p:column id="montoSolicitudEdit" headerText="Monto" resizable="false" width="10%" style="text-align: right"> 
                            <h:outputText value="#{solicitud.analisisMonto}">
                                <f:convertNumber type="currency" currencySymbol="$ " />
                            </h:outputText>  
                        </p:column> 

                        <p:column id="liquidoSolicitudEdit" headerText="Liquido" resizable="false" width="10%" style="text-align: right"> 
                            <h:outputText value="#{solicitud.analisisTotalliquido}">
                                <f:convertNumber type="currency" currencySymbol="$ " />
                            </h:outputText>  
                        </p:column> 

                        <p:column id="tasaSolicitudEdit" headerText="Tasa" resizable="false" width="5%" style="text-align: right"> 
                            <h:outputText value="#{solicitud.analisisTasa}">
                                <f:convertNumber type="percent"  minFractionDigits="2"/>
                            </h:outputText>  
                        </p:column> 

                        <p:column id="plazoSolicitudEdit" headerText="Plazo" resizable="false" width="5%" style="text-align: center"> 
                            <h:outputText value="#{solicitud.analisisPlazo}" />  
                        </p:column>

                        <p:column id="cuotaSolicitudEdit" headerText="Cuota" resizable="false" width="8%" style="text-align: right"> 
                            <h:outputText value="#{solicitud.analisisCuotacapitalmasintereses}">
                                <f:convertNumber type="currency" currencySymbol="$ " />
                            </h:outputText>  
                        </p:column>
                        
                        <p:column id="enAgendaEdit" headerText="En agenta" resizable="false" width="5%" style="text-align: center"> 
                            <h:selectBooleanCheckbox value="#{solicitud.selected}" />  
                        </p:column>


                    </p:dataTable>  

                    <br/>

                    <p:commandButton icon="ui-icon-disk" actionListener="#{agendaComiteCreditosManagedBean.save}" value="#{crudbundle.Update}" update="display,:AgendaListForm,:growl" oncomplete="handleSubmit(xhr,status,args,AgendaEditDialog);"/>
                    <span>&nbsp;</span>
                    <p:commandButton icon="ui-icon-closethick" value="#{crudbundle.Cancel}" onclick="AgendaEditDialog.hide()"/>
                </h:panelGroup>

            </h:form>

        </p:dialog>

    </ui:composition>

</html>
